REVEL.LoadFunctions[#REVEL.LoadFunctions + 1] = function()
--------------------------------
-- External Item Descriptions --
--------------------------------


-----Descriptions on Russian-----

if not __eidRusItemDescriptions then -- Items
    ---@diagnostic disable-next-line: lowercase-global
    __eidRusItemDescriptions = {}
end

__eidRusItemDescriptions[REVEL.ITEM.HEAVENLY_BELL.id] = {"Heavenly Bell / �������� �������", "���� ��������� ������� ���� �� �������� �� ������ �����:#1) � ������ ��������� ������� ����� ��������#2) �� ������������ ��������� �������� ���������#3) ����� � ������ �������� ���� �����#4) 3 ��������� ����� ����� �� ����� (���� �� �� �������� �����)#5) ����� ������ �� ����������� � ���� ������ �������#6) ��� ��������� ������ ����� �������� ���"}
__eidRusItemDescriptions[REVEL.ITEM.MINT_GUM.id] = {"Mint Gum / ������ ������", "����� ��������� ������#5 ������������ ��������� ��������� �����"}
__eidRusItemDescriptions[REVEL.ITEM.FECAL_FREAK.id] = {"Fecal Freak / ��������", "�������� ����� �� ������� ����� �������#� 1.5� ��������� �����#� +1.5 � �����#� �25% ��������� ��������#� �25% �������� �����"}
__eidRusItemDescriptions[REVEL.ITEM.LIL_BELIAL.id] = {"Lil Belial / ����� ������", "�������� ������#��������� ���������� ������#���� ����� ����� � ��� �������, � ������� �� ������� ����� ������, ���� �������"}
__eidRusItemDescriptions[REVEL.ITEM.AEGIS.id] = {"Aegis / �����", "���, ������� ������ ���������#��������� ��������"}
__eidRusItemDescriptions[REVEL.ITEM.BIRTHDAY_CANDLE.id] = {"Birthday Candle / ����� �� ��� ��������", "���� �������, �������� � ��� ���:#���� ��� ������ ���� - ���� ������ ����#���� ��� ������ - ���� ����#���� ��� ���� - ���� �����#���� ������ 15 ����� - ���� ��������#� � ���� ������ ���� + �� ���� ���������������"}
__eidRusItemDescriptions[REVEL.ITEM.DYNAMO.id] = {"Dynamo / ���������", "�������������� ������������ �����#������������ ������ ������"}
__eidRusItemDescriptions[REVEL.ITEM.BURNBUSH.id] = {"Burning Bush / ���������� ������", "�������, ����������� �������� ��������."}
__eidRusItemDescriptions[REVEL.ITEM.PENANCE.id] = {"Penance / ��������", "���� ������ � ������ �������� �����:#� +0.06 � �������� ����� �� ������ ���-������ ����#� +1 � ����� �� ������ ������� ������#� +0.15 � ����� �� ������ ���-������� ������"}
__eidRusItemDescriptions[REVEL.ITEM.ICETRAY.id] = {"Ice Tray / �������� ��� ����", "����� �������� ��������, ����������� �� ����#��������� ����� �� ����"}
__eidRusItemDescriptions[REVEL.ITEM.CLEANER.id] = {"Window Cleaner / ���������� ����", "����� ������� �������� ����� ������"}
__eidRusItemDescriptions[REVEL.ITEM.SPONGE.id] = {"Sponge Bombs / �����-�����", "����� ��������� �����#������� ������ �����, � ����������� �� ���������� ����������� ����"}
__eidRusItemDescriptions[REVEL.ITEM.PATIENCE.id] = {"Spirit of Patience / ��� ��������", "�������� ������� ������� ������ 0.3 ���., ���� ������ �� �����"}
__eidRusItemDescriptions[REVEL.ITEM.TAMPON.id] = {"Cutton Bud / ������ �������", "�������� ����� ��������� ����#���������� ���� �� ����� �������� ���� ����������������"}
__eidRusItemDescriptions[REVEL.ITEM.BCONTROL.id] = {"Birth Control / �����������������", "�������� ���������#� ������ ���� + � �����"}
__eidRusItemDescriptions[REVEL.ITEM.TBUG.id] = {"Tummy Bug, ���������� ���", "����� ���������� ����������� �������� �������� ��������� ���������, �������� � �������� ������ ����� ������� ���� �� ������� ����"}
__eidRusItemDescriptions[REVEL.ITEM.FFIRE.id] = {"Friendly Fire / ������������� �����", "��������� � ����#������ ������ ������ ����� �������� �� ������"}
__eidRusItemDescriptions[REVEL.ITEM.MONOLITH.id] = {"The Monolith / �������", "������������� ��� ���� �������#�������� ����� ����, ����� ������� �� 3 �������"}
__eidRusItemDescriptions[REVEL.ITEM.HYPER_DICE.id] = {"Hyper Dice / ����� �����", "������ �������� ������ ������#����������, ���� ������������ ������� �����"}
__eidRusItemDescriptions[REVEL.ITEM.MIRROR.id] = {"Mirror Shard / ������� �������", "����������� �������, �������� �������#����������� ������������ �� ������"}

if not __eidRusTrinketDescriptions then -- Trinkets
    ---@diagnostic disable-next-line: lowercase-global
    __eidRusTrinketDescriptions = {}
end

__eidRusTrinketDescriptions[REVEL.ITEM.SPARE_CHANGE.id] = {"Spare Change / ������ �����", "���� ����� ��� ����� � �������#���� 3 ����� ��� ����� � ������� �������#���� ������ ���� ��� ����� � ������� �������"}
__eidRusTrinketDescriptions[REVEL.ITEM.LIBRARY_CARD.id] = {"Library Card / ������������ �����", "���������� ���� � ����������"}
__eidRusTrinketDescriptions[REVEL.ITEM.ARCHAEOLOGY.id] = {"Archaeology / ����������", "������, �����, ������, ������ � ����� ���� � ��� ���� ���� ��������� �������� �������� ��� ����������"}
__eidRusTrinketDescriptions[REVEL.ITEM.GAGREFLEX.id] = {"Gag Reflex / ������� �������", "����� �������� ������ �������� �������� ������ �������� ����� � �������� �������"}

if not __eidRusCardDescriptions  then -- Cards
    ---@diagnostic disable-next-line: lowercase-global
    __eidRusCardDescriptions  = {}
end

__eidRusCardDescriptions[REVEL.POCKETITEM.LOTTERY_TICKET] = {"Lottery Ticket / ���������� �����", "������� ������� ����������, ������� ������ ��������� � �������"}


--------------
-- MinimAPI --
--------------

function REVEL.LoadMinimapAPICompat()
    local revIcons = Sprite()
    revIcons:Load("gfx/ui/rev_custom_icons.anm2", true)
    MinimapAPI:AddIcon("Shrine Room", revIcons, "Shrines", 0)
    MinimapAPI:AddIcon("Mirror Entrance", revIcons, "MirrorEntrance", 0)
    MinimapAPI:AddIcon("Mirror Room", revIcons, "MirrorRoom", 0)
    MinimapAPI:AddIcon("Mirror Room Locked", revIcons, "MirrorRoomLocked", 0)

    local mirrorMapIcons = Sprite()
    mirrorMapIcons:Load("gfx/ui/mirror_room_icon.anm2", true)
    local mirrorMapIconsLarge = Sprite()
    mirrorMapIconsLarge:Load("gfx/ui/mirror_room_icon_big.anm2", true)

    for dir = 0, 3 do
        local shape = "MirrorRoom" .. REVEL.dirToString[dir]
        MinimapAPI.RoomShapeFrames[shape] = {
            small = {
                ["RoomUnvisited"] = {sprite = mirrorMapIcons,anim = "RoomUnvisited",frame = dir},
                ["RoomVisited"] = {sprite = mirrorMapIcons,anim = "RoomVisited",frame = dir},
                ["RoomSemivisited"] = {sprite = mirrorMapIcons,anim = "RoomUnvisited",frame = dir},
                ["RoomCurrent"] = {sprite = mirrorMapIcons,anim = "RoomCurrent",frame = dir},
            },
            large = {
                ["RoomUnvisited"] = {sprite = mirrorMapIconsLarge,anim = "RoomUnvisited",frame = dir},
                ["RoomVisited"] = {sprite = mirrorMapIconsLarge,anim = "RoomVisited",frame = dir},
                ["RoomSemivisited"] = {sprite = mirrorMapIconsLarge,anim = "RoomUnvisited",frame = dir},
                ["RoomCurrent"] = {sprite = mirrorMapIconsLarge,anim = "RoomCurrent",frame = dir},
            },
        }
        
        local function addDir(vec) 
          if dir == 0 or dir == 2 then
            return vec + REVEL.dirToVel[dir] * 0.1 
          else
            return vec + REVEL.dirToVel[dir] * 0.025 
          end
        end

        MinimapAPI.RoomShapeGridPivots[shape] = Vector(0,0)
        MinimapAPI.RoomShapeGridSizes[shape] = Vector(1,1)
        MinimapAPI.RoomShapePositions[shape] = {Vector(0,0)}

        MinimapAPI.RoomShapeIconPositions[1][shape] = REVEL.map(MinimapAPI.RoomShapeIconPositions[1][RoomShape.ROOMSHAPE_1x1], addDir)
        MinimapAPI.RoomShapeIconPositions[2][shape] = REVEL.map(MinimapAPI.RoomShapeIconPositions[2][RoomShape.ROOMSHAPE_1x1], addDir)

        MinimapAPI.LargeRoomShapeIconPositions[1][shape] = REVEL.map(MinimapAPI.LargeRoomShapeIconPositions[1][RoomShape.ROOMSHAPE_1x1], addDir)
        MinimapAPI.LargeRoomShapeIconPositions[2][shape] = REVEL.map(MinimapAPI.LargeRoomShapeIconPositions[2][RoomShape.ROOMSHAPE_1x1], addDir)
        MinimapAPI.LargeRoomShapeIconPositions[3][shape] = REVEL.map(MinimapAPI.LargeRoomShapeIconPositions[3][RoomShape.ROOMSHAPE_1x1], addDir)
        MinimapAPI.RoomShapeAdjacentCoords[shape] = MinimapAPI.RoomShapeAdjacentCoords[RoomShape.ROOMSHAPE_1x1]
        MinimapAPI.RoomShapeDoorCoords[shape] = MinimapAPI.RoomShapeDoorCoords[RoomShape.ROOMSHAPE_1x1]
        MinimapAPI.RoomShapeDoorSlots[shape] = MinimapAPI.RoomShapeDoorSlots[RoomShape.ROOMSHAPE_1x1]
    end

    REVEL.MinimapAPICompatLoaded = true
end

if MinimapAPI then
    REVEL.LoadMinimapAPICompat()
else
    revel:AddPriorityCallback(ModCallbacks.MC_POST_GAME_STARTED, CallbackPriority.IMPORTANT, function()
        if MinimapAPI and not REVEL.MinimapAPICompatLoaded then
            REVEL.LoadMinimapAPICompat()
        end
    end)
end

-----------------
-- Fiend Folio --
-----------------

local function LoadFiendFolioCompat(typeLoaded)
    if not FiendFolio then return end

    --Glacier Rooms
    local ffRooms = {}
    local ffSRooms = {}
    for _, name in ipairs(REVEL.RoomEditors) do
        local rooms = REVEL.GetRoomsIfExistent("revel1.ff.glacier_"..name)
        local SRooms = REVEL.GetRoomsIfExistent("revel1.ff.glacier_special_"..name)
        if rooms then
            table.insert(ffRooms,{Name = name.."(FF)", Rooms = rooms})
        end
        if SRooms then
            table.insert(ffSRooms,{Name = name.."(FF)", Rooms = rooms})
        end
    end

    for _, roomName in ipairs(ffRooms) do
        REVEL.RoomLists.Glacier:AddRooms(roomName)
    end
    for _, roomName in ipairs(ffSRooms) do
        REVEL.RoomLists.GlacierSpecial:AddRooms(roomName)
    end

    --Glacier Reskins
    REVEL.mixin(REVEL.EntityReplacements["Glacier"].Replacements, {
        [15] = {
            [FiendFolio.FF.Drumstick.Var] = {
                SPRITESHEET = {
                    [0] = "reskins/ff/monster_drumstick_glacier",
                },
                SPLAT_COLOR = REVEL.WaterSplatColor,
            }
        },
        [115] = {
            [FiendFolio.FF.Edema.Var] = {
                SPRITESHEET = {
                    [0] = "reskins/ff/monster_edema_glacier",
                },
                SPLAT_COLOR = REVEL.WaterSplatColor
            }
        },
        [151] = {
            [FiendFolio.FF.Wimpy.Var] = {
                SPRITESHEET = {
                    [0] = "reskins/ff/wimpynew_glacier",
                },
                SPLAT_COLOR = REVEL.WaterSplatColor
            }
        },
        [155] = {
            [FiendFolio.FF.Weaver.Var] = {
                SPRITESHEET = {
                    [0] = "reskins/ff/weaver_glacier",
                },
                SPLAT_COLOR = REVEL.WaterSplatColor,
            }
        },
        [160] = {
            [FiendFolio.FF.Haunted.Var] = {
                SPRITESHEET = {
                    [0] = "reskins/ff/monster_hauntedbody_glacier",
                    [1] = "reskins/ff/monster_hauntedhead_glacier"
                },
                SPLAT_COLOR = REVEL.WaterSplatColor
            },
            [FiendFolio.FF.Yawner.Var] = {
                SPRITESHEET = {
                    [0] = "reskins/ff/monster_yawnerhead_glacier",
                    [1] = "reskins/ff/monster_yawnerbody_glacier"
                },
                SPLAT_COLOR = REVEL.SnowSplatColor
            },
            [FiendFolio.FF.Slim.Var] = {
                [0] = {
                    SPRITESHEET = {
                        [0] = "reskins/ff/slim_full_glacier",
                        [1] = "reskins/ff/slim_full_glacier",
                    },
                    SPLAT_COLOR = REVEL.WaterSplatColor
                },
                [2] = {
                    SPRITESHEET = {
                        [0] = "reskins/ff/limb_glacier",
                    },
                    SPLAT_COLOR = REVEL.WaterSplatColor
                },
            },
            [FiendFolio.FF.Meatwad.Var] = {
                SPRITESHEET = {
                    [0] = "reskins/ff/meatwad_glacier",
                },
                SPLAT_COLOR = REVEL.WaterSplatColor
            },
            [FiendFolio.FF.MrHorf.Var] = {
                SPRITESHEET = {
                    [0] = "reskins/glacier_greed_gaper_body",
                    [1] = "reskins/ff/monster_mrhorfhead_glacier",
                    [2] = "reskins/ff/monster_mrhorf_glacier"
                },
                SPLAT_COLOR = REVEL.WaterSplatColor
            },
            [FiendFolio.FF.MrHorfHead.Var] = {
                SPRITESHEET = {
                    [0] = "reskins/glacier_horf",
                    [1] = "reskins/ff/monster_mrhorfhead_glacier",
                    [2] = "reskins/ff/monster_mrhorf_glacier"
                },
                SPLAT_COLOR = REVEL.WaterSplatColor
            },
            [FiendFolio.FF.Matte.Var] = {
                SPRITESHEET = {
                    [0] = "reskins/ff/monster_matte_glacier",
                    [1] = "reskins/ff/monster_matte_glacier",
                },
                SPLAT_COLOR = REVEL.WaterSplatColor
            },
            [FiendFolio.FF.Spitum.Var] = {
                SPRITESHEET = {
                    [0] = "reskins/ff/monster_spitum_glacier",
                },
                SPLAT_COLOR = REVEL.WaterSplatColor
            },
        },
        [450] = {
            [FiendFolio.FF.Fish.Var] = {
                SPRITESHEET = {
                    [0] = "reskins/ff/fishygaper_glacier",
                },
                SPLAT_COLOR = REVEL.WaterSplatColor
            },
            [FiendFolio.FF.Shirk.Var] = {
                SPRITESHEET = {
                    [0] = "reskins/ff/monster_shirk_glacier",
                },
                SPLAT_COLOR = REVEL.SnowSplatColor
            }
        },
        [666] = {
            [FiendFolio.FF.DrinkWorm.Var] = {
                SPRITESHEET = {
                    [0] = "reskins/ff/drink_worm_glacier",
                },
                SPLAT_COLOR = REVEL.WaterSplatColor,
            }
        },
    }, true)

    REVEL.FiendFolioCompatLoaded = REVEL.FiendFolioCompatLoaded or {}
    REVEL.FiendFolioCompatLoaded[typeLoaded] = true
end

local loadType = 2
if FiendFolio then
    LoadFiendFolioCompat(loadType)
else
    revel:AddPriorityCallback(ModCallbacks.MC_POST_GAME_STARTED, CallbackPriority.IMPORTANT, function()
        if FiendFolio and not (REVEL.FiendFolioCompatLoaded or REVEL.FiendFolioCompatLoaded[loadType]) then
            LoadFiendFolioCompat(loadType)
        end
    end)
end


Isaac.DebugString("Revelations: Loaded Mod Compatibility for Chapter 1!")
end